CREATE TABLE IF NOT EXISTS PESSOA(
ID INT PRIMARY KEY auto_increment,
NOME VARCHAR(300)
);
INSERT INTO PESSOA(NOME)VALUES('MARCELO'),('RICARDO');
CREATE TABLE IF NOT EXISTS MENSAGEM(
ID INT PRIMARY KEY auto_increment,
TEXTO TEXT,
ID_ORIGEM INT,
ID_DESTINO INT,
foreign key(ID_ORIGEM)references PESSOA(ID),
foreign key(ID_DESTINO)references PESSOA(ID)
);
INSERT INTO MENSAGEM(ID_ORIGEM,ID_DESTINO,TEXTO)VALUES(1,2,'OI');
SELECT * FROM MENSAGEM;

INSERT INTO MENSAGEM(ID_ORIGEM,ID_DESTINO,TEXTO)VALUES(2,1,'TUDO OK');

SELECT O.NOME AS ORIGEM,

D.NOME AS DESTINO,
M.TEXTO FROM MENSAGEM AS M LEFT JOIN  PESSOA AS O ON O.ID=M.ID_DESTINO
LEFT JOIN PESSOA AS D ON D.ID=M.ID_ORIGEM;
